(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a2ee816"],{8970:function(t,e,c){"use strict";var a=c("7a23"),o={class:"cart"},n={class:"table__head"},r=Object(a["createVNode"])("th",{scope:"col",class:"column__1"},"商品",-1),s=Object(a["createVNode"])("th",{scope:"col",class:"column__2"},"數量",-1),i=Object(a["createVNode"])("th",{scope:"col",class:"column__3"},"價格",-1),d=Object(a["createVNode"])("th",{scope:"col",class:"column__4"},null,-1),l={scope:"row",class:"cart__title"},u={class:"text"},b={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},p=Object(a["createVNode"])("span",{class:"visually-hidden delete__icon"},"Loading...",-1),h={key:1,class:"material-icons delete__icon"},j={class:"qty__rows"},O={class:"input-group input-group-sm qty__buttons"},m=Object(a["createVNode"])("span",{class:"material-icons text-white"},"remove",-1),g=Object(a["createVNode"])("span",{class:"material-icons text-white"},"add",-1),f={class:"price__row"},v={key:0,class:"text-primary mb-0"},N={class:"delete-cell"},V={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},C=Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),k={key:1,class:"material-icons"},y={key:0},w={colspan:"4"},_={class:"input-group mt-2 coupon__inputs"},x={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},B=Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),L=Object(a["createTextVNode"])(" 套用 "),T={class:"total__row"},S={colspan:"4"},$={class:"buttons"},I=Object(a["createTextVNode"])(" 結帳去 "),M=Object(a["createTextVNode"])("來去逛逛吧 ");function D(t,e,c,D,P,q){var z=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("table",{class:["table",{border:"lg"===c.size}]},[Object(a["createVNode"])("thead",n,[Object(a["createVNode"])("tr",{class:{"fs-5":"lg"===c.size}},[r,s,i,d],2)]),Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(P.cartList,(function(e,o){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("th",l,["lg"===c.size?(Object(a["openBlock"])(),Object(a["createBlock"])("img",{key:0,src:e.product.imageUrl,alt:"product-image"},null,8,["src"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",u,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.product.title)+" ",1),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.productSpecs,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:t}," ("+Object(a["toDisplayString"])(t.chosedSpec)+") ",1)})),128))]),Object(a["createVNode"])("a",{href:"#",onClick:Object(a["withModifiers"])((function(t){return q.deleteCartItem(e.id,o)}),["prevent"]),class:"hide-for-pad"},[P.loadingIndex===o?(Object(a["openBlock"])(),Object(a["createBlock"])("div",b,[p])):(Object(a["openBlock"])(),Object(a["createBlock"])("span",h,"delete"))],8,["onClick"])]),Object(a["createVNode"])("td",j,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("button",{class:["btn btn-primary-light",{disabled:1===e.qty}],type:"button",id:"button-addon1",onClick:function(t){return q.updateCart(e,e.qty-1,o)}},[m],10,["onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control cart__num","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return q.updateCart(e,e.qty,o)}},null,40,["onUpdate:modelValue","onChange"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("button",{class:"btn btn-primary-light",type:"button",id:"button-addon1",onClick:function(t){return q.updateCart(e,e.qty+1,o)}},[g],8,["onClick"])])]),Object(a["createVNode"])("td",f,[Object(a["createVNode"])("p",{class:["mb-0",{"text-decoration-line-through":P.couponed}]}," NT$ "+Object(a["toDisplayString"])(t.$toCurrency(Math.round(e.total))),3),P.couponed?(Object(a["openBlock"])(),Object(a["createBlock"])("p",v," NT$ "+Object(a["toDisplayString"])(t.$toCurrency(Math.round(e.final_total))),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",N,[Object(a["createVNode"])("a",{href:"#",onClick:Object(a["withModifiers"])((function(t){return q.deleteCartItem(e.id,o)}),["prevent"])},[P.loadingIndex===o?(Object(a["openBlock"])(),Object(a["createBlock"])("div",V,[C])):(Object(a["openBlock"])(),Object(a["createBlock"])("span",k,"delete"))],8,["onClick"])])])})),128)),"lg"===c.size?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",y,[Object(a["createVNode"])("td",w,[Object(a["withDirectives"])(Object(a["createVNode"])("a",{href:"#",onClick:e[1]||(e[1]=Object(a["withModifiers"])((function(t){return P.useCoupon=!P.useCoupon}),["prevent"]))}," 使用優惠代碼 ",512),[[a["vShow"],!P.useCoupon]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",_,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control w-25",placeholder:"輸入優惠券代碼","onUpdate:modelValue":e[2]||(e[2]=function(t){return P.couponCode=t})},null,512),[[a["vModelText"],P.couponCode]]),Object(a["createVNode"])("button",{class:"btn btn-outline-primary",type:"button",id:"button-addon2",onClick:e[3]||(e[3]=function(){return q.addCoupon&&q.addCoupon.apply(q,arguments)})},[P.isCouponing?(Object(a["openBlock"])(),Object(a["createBlock"])("div",x,[B])):Object(a["createCommentVNode"])("",!0),L])],512),[[a["vShow"],P.useCoupon]])])])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("tr",T,[Object(a["createVNode"])("td",S,[Object(a["createVNode"])("button",{class:["btn btn-outline-primary",{disabled:0===P.cartList.length}],type:"button",onClick:e[4]||(e[4]=function(){return q.deleteAllCartItems&&q.deleteAllCartItems.apply(q,arguments)})}," 清空購物車 ",2)])])])],2)]),Object(a["createVNode"])("div",$,[0!==P.cartList.length&&"lg"!==c.size?(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:0,class:"btn btn-primary w-100 fw-bolder",to:"/dino-park/cart/list"},{default:Object(a["withCtx"])((function(){return[I]})),_:1})):0===P.cartList.length&&"sm"===c.size?(Object(a["openBlock"])(),Object(a["createBlock"])(z,{key:1,class:"btn btn-primary w-100 fw-bolder",to:"/dino-park/store"},{default:Object(a["withCtx"])((function(){return[M]})),_:1})):Object(a["createCommentVNode"])("",!0)])])}c("99af");var P={props:{size:{type:String,default:"sm"}},emits:["update-num","send-total"],data:function(){return{cartList:[],total:0,finalTotal:0,loadingIndex:null,couponCode:"",isCouponing:!1,useCoupon:!1,couponed:!1}},methods:{getCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cartList=e.data.data.carts,t.finalTotal=e.data.data.final_total,t.total=e.data.data.total,t.$emit("update-num",t.cartList.length),t.sendTotal()):t.swal(e.data.message,"error")})).catch((function(t){return console.log(t)}))},deleteCartItem:function(t,e){var c=this;this.loadingIndex=e;var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/cart/").concat(t);this.$http.delete(a).then((function(t){t.data.success?(c.swal(t.data.message),c.emitter.emit("add-cart")):c.swal(t.data.message,"error"),c.loadingIndex=null})).catch((function(t){return console.log(t)}))},deleteAllCartItems:function(){var t=this;this.swalComfirm("確定清空購物車?").then((function(e){if(e.isConfirmed){var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/carts");t.$http.delete(c).then((function(e){e.data.success?(t.swal(e.data.message),t.emitter.emit("add-cart")):t.swal(e.data.message,"error")})).catch((function(t){return console.log(t)}))}}))},updateCart:function(t,e,c){var a=this;e<1&&(this.swal("商品數量小於1","error"),e=1),this.loadingIndex=c;var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/cart/").concat(t.id);this.$http.put(o,{data:{product_id:t.product.id,qty:e}}).then((function(t){t.data.success?(a.swal(t.data.message),a.emitter.emit("add-cart")):a.swal(t.data.message,"error"),a.loadingIndex=null})).catch((function(t){return console.log(t)}))},addCoupon:function(){var t=this;this.isCouponing=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/coupon");this.$http.post(e,{data:{code:this.couponCode}}).then((function(e){e.data.success?(t.getCartList(),t.swal(e.data.message),t.couponed=!0):t.swal(e.data.message,"error"),t.isCouponing=!1})).catch((function(t){return console.log(t)}))},sendTotal:function(){this.$emit("send-total",this.finalTotal,this.cartList.length,this.total,this.couponed)}},created:function(){var t=this;this.getCartList(),this.emitter.on("add-cart",(function(){t.getCartList()}))},unmounted:function(){var t=this;this.emitter.off("add-cart",(function(){t.getCartList()}))}};P.render=D;e["a"]=P},"925b":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o={class:"cart_list py-6"},n=Object(a["createVNode"])("div",{class:"outter-spinner"},[Object(a["createVNode"])("div",{class:"inner-spinner"},[Object(a["createVNode"])("div")])],-1),r={class:"container"},s=Object(a["createStaticVNode"])('<div class="progress__area mb-6 py-6"><div class="progress__bar"><div class="dotbox active"><div class="dot">1</div><span>購物車</span></div><div class="dotbox"><div class="dot">2</div><span>填寫資料</span></div><div class="dotbox"><div class="dot">3</div><span>訂單確認</span></div></div></div>',1),i={key:0,class:"subtotal__area"},d={class:"row"},l=Object(a["createStaticVNode"])('<div class="col-md-7"><div class="coupon"><h2 class="cart-title">可使用優惠券</h2><div class="coupon__list py-1 px-3 border"><table class="table"><thead class="coupon__head"><tr><th scope="col" class="p-1">名稱</th><th scope="col" class="p-1">代碼</th></tr></thead><tbody><tr><td>盛大開幕好禮大放送</td><td>opening</td></tr><tr><td>全站88折</td><td>888</td></tr></tbody></table></div></div></div>',1),u={class:"col-md-5"},b={class:"subtotal"},p=Object(a["createVNode"])("h2",{class:"cart-title"},"訂單小計",-1),h={class:"subtotal__list py-1 px-3 border"},j={class:"table"},O=Object(a["createVNode"])("td",null,"小計",-1),m={class:"text-end"},g=Object(a["createVNode"])("td",null,"折扣",-1),f={class:"text-end"},v=Object(a["createVNode"])("td",null,"合計",-1),N={class:"text-end"},V=Object(a["createTextVNode"])(" 前往結帳 "),C={key:1,class:"no__product"},k={class:"icon text-center"},y=Object(a["createVNode"])("span",{class:"material-icons shop__icon"},"shopping_cart",-1),w=Object(a["createVNode"])("p",{class:"fw-bold"},"您的購物車是空的",-1),_=Object(a["createVNode"])("p",null,"加點商品進來吧",-1),x=Object(a["createTextVNode"])(" 來去逛逛 "),B={class:"mb-6"},L=Object(a["createVNode"])("h3",{class:"border-bottom border-2 fs-3 pb-2 fw-bold mb-6 text-primary"},"推薦商品",-1);function T(t,e,c,T,S,$){var I=Object(a["resolveComponent"])("Loading"),M=Object(a["resolveComponent"])("MenuCart"),D=Object(a["resolveComponent"])("router-link"),P=Object(a["resolveComponent"])("Card"),q=Object(a["resolveComponent"])("swiper-slide"),z=Object(a["resolveComponent"])("swiper");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])(I,{active:S.isLoading,"onUpdate:active":e[1]||(e[1]=function(t){return S.isLoading=t})},{default:Object(a["withCtx"])((function(){return[n]})),_:1},8,["active"]),Object(a["createVNode"])("div",r,[s,S.cartLength?(Object(a["openBlock"])(),Object(a["createBlock"])("div",i,[Object(a["createVNode"])(M,{size:"lg",class:"mb-6",onSendTotal:$.updateTotal},null,8,["onSendTotal"]),Object(a["createVNode"])("div",d,[l,Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",b,[p,Object(a["createVNode"])("div",h,[Object(a["createVNode"])("table",j,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[O,Object(a["createVNode"])("td",m," NT$ "+Object(a["toDisplayString"])(t.$toCurrency(Math.round(this.total)))+"元 ",1)]),Object(a["createVNode"])("tr",null,[g,Object(a["createVNode"])("td",f," NT$ "+Object(a["toDisplayString"])(t.$toCurrency(Math.round(this.discount)))+"元 ",1)]),Object(a["createVNode"])("tr",null,[v,Object(a["createVNode"])("td",N," NT$ "+Object(a["toDisplayString"])(t.$toCurrency(Math.round(this.finalTotal)))+"元 ",1)])])]),Object(a["createVNode"])(D,{to:"/dino-park/cart/order",class:"btn btn-lg btn-primary d-block w-75 mx-auto text-white my-3"},{default:Object(a["withCtx"])((function(){return[V]})),_:1})])])])])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",C,[Object(a["createVNode"])("div",k,[y,w,_,Object(a["createVNode"])(D,{to:"/dino-park/store",class:"btn btn-lg btn-primary d-block w-25 mx-auto text-white my-3"},{default:Object(a["withCtx"])((function(){return[x]})),_:1})])])),Object(a["createVNode"])("div",B,[L,Object(a["createVNode"])(z,{"slides-per-view":1,"space-between":30,loop:!0,scrollbar:S.swiperSetting.scrollbar,breakpoints:S.swiperSetting.breakpoints,class:"mb-6"},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(S.recommendProducts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])(q,{key:t.id},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(P,{"product-data":t,onAddCart:$.addToCart},null,8,["product-data","onAddCart"])]})),_:2},1024)})),128))]})),_:1},8,["scrollbar","breakpoints"])])])])}c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b");var S=c("8970"),$=c("7d91"),I={data:function(){return{isLoading:!1,useCoupon:!1,allProducts:[],recommendProducts:[],total:0,finalTotal:0,cartLength:0,swiperSetting:{scrollbar:{draggable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1025:{slidesPerView:4,spaceBetween:30}}}}},components:{MenuCart:S["a"],Card:$["a"]},computed:{discount:function(){return this.total-this.finalTotal}},methods:{getCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cartLength=e.data.data.carts.length,t.finalTotal=e.data.data.final_total):t.swal(e.data.message,"error")})).catch((function(t){return console.log(t)}))},getAllProducts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/products/all");this.$http.get(e).then((function(e){e.data.success?(t.allProducts=e.data.products,t.getRecommends()):t.swal(e.data.message,"error"),t.isLoading=!1})).catch((function(t){return console.log(t)}))},getRandomInt:function(t){return Math.floor(Math.random()*t)},getRecommends:function(){for(var t=this,e=new Set([]),c=0;e.size<4;c++){var a=this.getRandomInt(this.allProducts.length);e.add(a)}e.forEach((function(e){t.recommendProducts.push(t.allProducts[e])}))},addToCart:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/cart");this.$http.post(c,{data:{product_id:t,qty:1}}).then((function(t){t.data.success?(e.swal(t.data.message),e.emitter.emit("add-cart")):e.swal(t.data.message,"error"),e.isLoading=!1})).catch((function(t){return console.log(t)}))},updateTotal:function(t,e,c,a){this.finalTotal=t,this.cartLength=e,this.total=c,this.useCoupon=a}},created:function(){this.getAllProducts(),this.getCartList()}};I.render=T;e["default"]=I}}]);
//# sourceMappingURL=chunk-3a2ee816.fd11faa1.js.map