(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b923f06"],{"07ac":function(e,t,o){var a=o("23e7"),r=o("6f53").values;a({target:"Object",stat:!0},{values:function(e){return r(e)}})},"6f53":function(e,t,o){var a=o("83ab"),r=o("df75"),c=o("fc6a"),n=o("d1e7").f,s=function(e){return function(t){var o,s=c(t),d=r(s),i=d.length,l=0,u=[];while(i>l)o=d[l++],a&&!n.call(s,o)||u.push(e?[o,s[o]]:s[o]);return u}};e.exports={entries:s(!0),values:s(!1)}},7307:function(e,t,o){"use strict";o.r(t);var a=o("7a23"),r={class:"order__list"},c=Object(a["createVNode"])("div",{class:"loadingio-spinner-rolling-feeb69z48bi"},[Object(a["createVNode"])("div",{class:"ldio-947txsafiul"},[Object(a["createVNode"])("div")])],-1),n={class:"container p-5 border border-primary"},s={class:"d-flex justify-content-end align-items-center mb-3"},d={class:"table-responsive fw-bold"},i={class:"table"},l=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",{class:"table-light"},[Object(a["createVNode"])("th",{scope:"col",width:"240"},"訂單編號"),Object(a["createVNode"])("th",{scope:"col",width:"120"},"訂單日期"),Object(a["createVNode"])("th",{scope:"col",width:"120"},"訂單金額"),Object(a["createVNode"])("th",{scope:"col",width:"120"},"是否付款"),Object(a["createVNode"])("th",{scope:"col",width:"120"},"操作")])],-1),u={key:0},b={key:1,class:"text-primary"},m={class:"btn-group",role:"group","aria-label":"Basic example"};function p(e,t,o,p,O,j){var f=Object(a["resolveComponent"])("Loading"),h=Object(a["resolveComponent"])("OrderModal"),V=Object(a["resolveComponent"])("Alert"),g=Object(a["resolveComponent"])("Pagination");return Object(a["openBlock"])(),Object(a["createBlock"])("div",r,[Object(a["createVNode"])(f,{active:O.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return O.isLoading=e})},{default:Object(a["withCtx"])((function(){return[c]})),_:1},8,["active"]),Object(a["createVNode"])(h,{ref:"orderModal","temp-order":O.tempOrder,onModifyOrder:j.modifyOrder},null,8,["temp-order","onModifyOrder"]),Object(a["createVNode"])("div",n,[Object(a["createVNode"])(V,{text:"刪除全部訂單，須經由園區主任簽核!!",color:"primary"}),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("button",{class:["btn btn-outline-primary",{disabled:!O.orders.length}],type:"button",onClick:t[2]||(t[2]=function(){return j.deleteAllOrders&&j.deleteAllOrders.apply(j,arguments)})}," 刪除全部訂單 ",2)]),Object(a["createVNode"])("div",d,[Object(a["createVNode"])("table",i,[l,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(O.orders,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$dateFormat(t.create_at)),1),Object(a["createVNode"])("td",null,"NT$ "+Object(a["toDisplayString"])(e.$toCurrency(Math.round(t.total))),1),Object(a["createVNode"])("td",null,[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("p",u,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("p",b,"未付款"))]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",m,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-info",onClick:function(e){return j.openModal(t)}}," 查看 ",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return j.deleteOrder(t.id)}}," 刪除 ",8,["onClick"])])])])})),128))])])]),Object(a["createVNode"])(g,{pagination:O.pagination,onChangePage:j.getOrders},null,8,["pagination","onChangePage"])])])}o("99af");var O=o("1799"),j=(o("b0c0"),{class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1"}),f={class:"modal-dialog modal-lg"},h={class:"modal-content"},V=Object(a["createVNode"])("div",{class:"modal-header bg-secondary"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"orderModalLabel"},"修改訂單資訊"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},v={class:"container-fluid"},N={class:"row"},w={class:"mb-3"},y=Object(a["createTextVNode"])("訂單日期: "),k={class:"ms-3"},C={class:"d-flex"},B=Object(a["createVNode"])("span",null,"訂購商品:",-1),$={class:"p-0 ms-3 mb-0"},x=Object(a["createTextVNode"])("訂單金額: "),M={class:"ms-3"},L={class:"col-md-6 mb-3"},S=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"訂購人姓名",-1),_={class:"col-md-6 mb-3"},D=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),F={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),U={class:"mb-3"},T=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"地址",-1),A={class:"mb-3"},P=Object(a["createVNode"])("label",{for:"comment",class:"form-label"},"留言",-1),E=Object(a["createVNode"])("div",{class:"modal-footer"},[Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消"),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-info"},"確認")],-1);function J(e,t,o,r,c,n){var s=Object(a["resolveComponent"])("Field"),d=Object(a["resolveComponent"])("error-message"),i=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",j,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",h,[V,Object(a["createVNode"])(i,{onSubmit:n.sendOder},{default:Object(a["withCtx"])((function(o){var r=o.errors;return[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("div",N,[Object(a["createVNode"])("div",w,[Object(a["createVNode"])("p",null,[y,Object(a["createVNode"])("span",k,Object(a["toDisplayString"])(e.$dateFormat(c.order.create_at)),1)]),Object(a["createVNode"])("p",C,[B,Object(a["createVNode"])("ol",$,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(n.products,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:e.id},Object(a["toDisplayString"])(e.product.title)+" * "+Object(a["toDisplayString"])(e.qty),1)})),128))])]),Object(a["createVNode"])("p",null,[x,Object(a["createVNode"])("span",M,"NT$ "+Object(a["toDisplayString"])(e.$toCurrency(Math.round(c.order.total))),1)])]),Object(a["createVNode"])("div",L,[S,Object(a["createVNode"])(s,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":r["姓名"]}],placeholder:"請輸入 訂購人姓名",rules:"required",modelValue:c.order.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.order.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(d,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",_,[D,Object(a["createVNode"])(s,{id:"tel",name:"電話",type:"number",class:["form-control",{"is-invalid":r["電話"]}],placeholder:"請輸入電話",rules:"min:10|required",modelValue:c.order.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.order.user.tel=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(d,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",F,[q,Object(a["createVNode"])(s,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":r["信箱"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:c.order.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.order.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(d,{name:"信箱",class:"invalid-feedback"})]),Object(a["createVNode"])("div",U,[T,Object(a["createVNode"])(s,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":r["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:c.order.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.order.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(d,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",A,[P,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control",id:"comment",rows:"3","onUpdate:modelValue":t[5]||(t[5]=function(e){return c.order.message=e})},"\r\n                            ",512),[[a["vModelText"],c.order.message,void 0,{trim:!0}]])])])])]),E]})),_:1},8,["onSubmit"])])])],512)}var z=o("5530"),G=(o("07ac"),o("7c2b")),H=o.n(G),I={props:{tempOrder:{type:Object,required:!0}},emits:["modify-order"],data:function(){return{modal:{},order:{products:{},user:{}}}},computed:{products:function(){return Object.values(this.order.products)}},watch:{tempOrder:function(){this.order=Object(z["a"])({},this.tempOrder)}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},sendOder:function(){this.order.products=this.products,this.$emit("modify-order",this.order)}},mounted:function(){this.modal=new H.a(this.$refs.orderModal)}};I.render=J;var K=I,Q={data:function(){return{isLoading:!1,orders:[],pagination:{},tempOrder:{}}},components:{Pagination:O["a"],OrderModal:K},methods:{openModal:function(e){this.tempOrder=e,this.$refs.orderModal.openModal()},getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/orders?page=").concat(t);this.$http.get(o).then((function(t){if(t.data.success){var o=t.data,a=o.orders,r=o.pagination;e.orders=a,e.pagination=r}else e.$swal({icon:"error",title:t.data.message,position:"top",showConfirmButton:!0});e.isLoading=!1}))},modifyOrder:function(e){var t=this;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/order/").concat(e.id);this.$http.put(o,{data:e}).then((function(e){e.data.success?(t.getOrders(t.pagination.current_page),t.$swal({icon:"success",title:e.data.message,toast:!0,position:"top",showConfirmButton:!1,timer:1800})):t.$swal({icon:"error",title:e.data.message,position:"top",showConfirmButton:!0}),t.isLoading=!1,t.$refs.orderModal.hideModal()}))},deleteOrder:function(e){var t=this,o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/order/").concat(e);this.$swal({title:"確認刪除訂單?",showConfirmButton:!0,showCancelButton:!0,reverseButtons:!0,icon:"warning"}).then((function(e){e.isConfirmed&&(t.isLoading=!0,t.$http.delete(o).then((function(e){e.data.success?(t.getOrders(t.pagination.current_page),t.$swal({icon:"success",title:e.data.message,toast:!0,position:"top",showConfirmButton:!1,timer:1800})):t.$swal({icon:"error",title:e.data.message,position:"top",showConfirmButton:!0}),t.isLoading=!1})))}))},deleteAllOrders:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/orders/all");this.$swal({title:"確認刪除 全部訂單?",showConfirmButton:!0,showCancelButton:!0,reverseButtons:!0,icon:"warning"}).then((function(o){o.isConfirmed&&(e.isLoading=!0,e.$http.delete(t).then((function(t){t.data.success?(e.getOrders(e.pagination.current_page),e.$swal({icon:"success",title:t.data.message,toast:!0,position:"top",showConfirmButton:!1,timer:1800})):e.$swal({icon:"error",title:t.data.message,position:"top",showConfirmButton:!0}),e.isLoading=!1})))}))}},created:function(){this.getOrders()}};Q.render=p;t["default"]=Q},b0c0:function(e,t,o){var a=o("83ab"),r=o("9bf2").f,c=Function.prototype,n=c.toString,s=/^\s*function ([^ (]*)/,d="name";a&&!(d in c)&&r(c,d,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-3b923f06.b8cbf669.js.map