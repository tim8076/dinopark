(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-563cb814"],{a434:function(e,t,c){"use strict";var o=c("23e7"),r=c("23cb"),a=c("a691"),n=c("50c4"),l=c("7b0b"),i=c("65f0"),d=c("8418"),s=c("1dde"),u=s("splice"),p=Math.max,b=Math.min,m=9007199254740991,j="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,o,s,u,O,h,f=l(this),g=n(f.length),v=r(e,g),V=arguments.length;if(0===V?c=o=0:1===V?(c=0,o=g-v):(c=V-2,o=b(p(a(t),0),g-v)),g+c-o>m)throw TypeError(j);for(s=i(f,o),u=0;u<o;u++)O=v+u,O in f&&d(s,u,f[O]);if(s.length=o,c<o){for(u=v;u<g-o;u++)O=u+o,h=u+c,O in f?f[h]=f[O]:delete f[h];for(u=g;u>g-o+c;u--)delete f[u-1]}else if(c>o)for(u=g-o;u>v;u--)O=u+o-1,h=u+c-1,O in f?f[h]=f[O]:delete f[h];for(u=0;u<c;u++)f[u+v]=arguments[u+2];return f.length=g-o+c,s}})},cc2a:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),r={class:"product__list fw-bold mb-6"},a=Object(o["createVNode"])("div",{class:"outter-spinner"},[Object(o["createVNode"])("div",{class:"inner-spinner"},[Object(o["createVNode"])("div")])],-1),n={class:"container p-5 border border-primary"},l={class:"d-flex justify-content-end align-items-center mb-3"},i={class:"table-responsive"},d={class:"table"},s=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",{class:"table-light"},[Object(o["createVNode"])("th",{scope:"col",width:"100"},"類型"),Object(o["createVNode"])("th",{scope:"col",width:"400"},"產品名稱"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"原價"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"售價"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"狀態"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"編輯")])],-1),u={scope:"row",class:"text-info"},p={key:0},b={key:1,class:"text-primary"},m={class:"btn-group",role:"group","aria-label":"Basic example"};function j(e,t,c,j,O,h){var f=Object(o["resolveComponent"])("Loading"),g=Object(o["resolveComponent"])("ProductModal"),v=Object(o["resolveComponent"])("Alert"),V=Object(o["resolveComponent"])("Pagination");return Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])(f,{active:O.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return O.isLoading=e})},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["active"]),Object(o["createVNode"])(g,{ref:"productModal",temp:O.tempProduct,isNew:O.isNew,onSendProduct:h.updateProduct},null,8,["temp","isNew","onSendProduct"]),Object(o["createVNode"])("div",n,[Object(o["createVNode"])("div",l,[Object(o["createVNode"])("button",{class:"btn btn-info",type:"button",onClick:t[2]||(t[2]=function(e){return h.openModal(!0)})}," 建立新產品 ")]),Object(o["createVNode"])(v,{text:"產品新增請參考本季商品型錄",color:"success"}),Object(o["createVNode"])("div",i,[Object(o["createVNode"])("table",d,[s,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(O.products,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t.id},[Object(o["createVNode"])("th",u,Object(o["toDisplayString"])(t.category),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.$toCurrency(t.origin_price)),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.$toCurrency(t.price)),1),Object(o["createVNode"])("td",null,[t.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("p",p,"啟用")):(Object(o["openBlock"])(),Object(o["createBlock"])("p",b,"未啟用"))]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-info",onClick:function(e){return h.openModal(!1,t)}}," 編輯 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return h.deleteProduct(t)}}," 刪除 ",8,["onClick"])])])])})),128))])])]),Object(o["createVNode"])(V,{pagination:O.pagination,onChangePage:h.getProducts},null,8,["pagination","onChangePage"])])])}c("99af"),c("a4d3"),c("e01a");var O={class:"modal fade",id:"productModal",ref:"modal",tabindex:"-1"},h={class:"modal-dialog modal-xl"},f={class:"modal-content"},g={class:"modal-header bg-secondary"},v={class:"modal-title",id:"productModalLabel"},V=Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),N={class:"modal-body"},y={class:"container-fluid"},k={class:"row"},P={class:"col-lg-4"},x={class:"mb-3"},w=Object(o["createVNode"])("label",{for:"imgUrl",class:"form-label"},"圖片網址",-1),B=Object(o["createVNode"])("label",{for:"imgUpload",class:"form-label"},"上傳主要圖片",-1),S={key:1,class:"d-flex\r\n                                    justify-content-center\r\n                                    align-items-center",style:{height:"200px"}},U=Object(o["createVNode"])("div",{class:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),C=Object(o["createVNode"])("label",{for:"imagesUrl",class:"form-label"},"上傳附圖",-1),T={class:"col-lg-8"},M={class:"mb-3"},L=Object(o["createVNode"])("label",{for:"title",class:"form-label"},[Object(o["createTextVNode"])(" 標題 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),D={class:"row mb-2"},_={class:"col-md-6"},I={class:"mb-3"},$=Object(o["createVNode"])("label",{for:"category",class:"form-label"},[Object(o["createTextVNode"])(" 分類 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),F={class:"col-md-6"},J={class:"mb-3"},q=Object(o["createVNode"])("label",{for:"unit",class:"form-label"},[Object(o["createTextVNode"])(" 單位 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),A={class:"col-md-6"},E={class:"mb-6"},z=Object(o["createVNode"])("label",{for:"origin_price",class:"form-label"},[Object(o["createTextVNode"])(" 原價 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),G={class:"col-md-6"},H={class:"mb-6"},K=Object(o["createVNode"])("label",{for:"price",class:"form-label"},[Object(o["createTextVNode"])(" 售價 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),Q={class:"col-md-6 mb-3"},R=Object(o["createVNode"])("label",{class:"form-label"}," 規格 ",-1),W={class:"d-flex align-items-center mb-6"},X=Object(o["createVNode"])("label",{class:"form-label"}," 規格 ",-1),Y=Object(o["createVNode"])("hr",null,null,-1),Z={class:"mb-3"},ee=Object(o["createVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),te={class:"mb-3"},ce=Object(o["createVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),oe={class:"form-check mb-3"},re=Object(o["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),ae={class:"modal-footer"},ne=Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function le(e,t,c,r,a,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",O,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("h5",v,Object(o["toDisplayString"])(n.modalTitle),1),V]),Object(o["createVNode"])("div",N,[Object(o["createVNode"])("div",y,[Object(o["createVNode"])("div",k,[Object(o["createVNode"])("div",P,[Object(o["createVNode"])("div",x,[w,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control mb-3",id:"imgUrl","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempProduct.imageUrl=e}),placeholder:"請輸入圖片網址"},null,512),[[o["vModelText"],a.tempProduct.imageUrl,void 0,{trim:!0}]]),B,Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",id:"imgUpload",onChange:t[2]||(t[2]=function(e){return n.upLoadImage("main-image",e)})},null,32),a.isLoading?(Object(o["openBlock"])(),Object(o["createBlock"])("div",S,[U])):(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,class:"img-fluid mb-3",alt:"main-image",src:a.tempProduct.imageUrl},null,8,["src"])),C,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e},[Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",id:"imagesUrl".concat(t),onChange:function(e){return n.upLoadImage(t,e)}},null,40,["id","onChange"]),Object(o["createVNode"])("img",{class:"img-fluid mb-3",alt:"main-image",src:a.tempProduct.imagesUrl[t]},null,8,["src"])])})),128)),a.tempProduct.imagesUrl[a.tempProduct.imagesUrl.length-1]||1===a.tempProduct.imagesUrl.length?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:2,class:"btn btn-info me-3 mb-3",type:"button",onClick:t[3]||(t[3]=function(){return n.addImage&&n.addImage.apply(n,arguments)})}," 新增圖片 ")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("button",{class:"btn btn-primary mb-3",type:"button",onClick:t[4]||(t[4]=function(){return n.deleteImage&&n.deleteImage.apply(n,arguments)})}," 刪除圖片 ")])]),Object(o["createVNode"])("div",T,[Object(o["createVNode"])("div",M,[L,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.tempProduct.title=e}),placeholder:"請輸入商品標題"},null,512),[[o["vModelText"],a.tempProduct.title,void 0,{trim:!0}]])]),Object(o["createVNode"])("div",D,[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("div",I,[$,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.tempProduct.category=e}),placeholder:"請輸入商品分類"},null,512),[[o["vModelText"],a.tempProduct.category,void 0,{trim:!0}]])])]),Object(o["createVNode"])("div",F,[Object(o["createVNode"])("div",J,[q,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.tempProduct.unit=e}),placeholder:"請輸入商品單位"},null,512),[[o["vModelText"],a.tempProduct.unit,void 0,{trim:!0}]])])]),Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",E,[z,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",min:"0",id:"origin_price","onUpdate:modelValue":t[8]||(t[8]=function(e){return a.tempProduct.origin_price=e}),placeholder:"請輸入商品原價"},null,512),[[o["vModelText"],a.tempProduct.origin_price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",G,[Object(o["createVNode"])("div",H,[K,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",min:"0",id:"price","onUpdate:modelValue":t[9]||(t[9]=function(e){return a.tempProduct.price=e}),placeholder:"請輸入商品售價"},null,512),[[o["vModelText"],a.tempProduct.price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",Q,[c.isNew?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[R,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.productSpecs,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control mb-3 text-primary fw-bold","onUpdate:modelValue":function(t){return e.type=t},placeholder:"規格種類: ex: 顏色"},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.type,void 0,{trim:!0}]]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.children,(function(t,c){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":function(t){return e.children[c]=t},key:c,placeholder:"規格 ex: 藍色、紅色、綠色"},null,8,["onUpdate:modelValue"])),[[o["vModelText"],e.children[c],void 0,{trim:!0}]])})),128)),Object(o["createVNode"])("div",W,[a.tempProduct.productSpecs[t].children[a.tempProduct.productSpecs[t].children.length-1]&&a.tempProduct.productSpecs[t].type?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn btn-outline-info me-3 d-inline-block",type:"button",onClick:function(e){return n.addSpecInput(t)}}," 新增欄位 ",8,["onClick"])):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"btn btn-outline-primary me-3",type:"button",onClick:function(e){return n.deleteSpecInput(t)}}," 刪除欄位 ",8,["onClick"])),Object(o["createVNode"])("button",{class:"btn btn-primary",type:"button",onClick:function(e){return n.deleteSpecType(t)}}," 刪除規格種類 ",8,["onClick"])])])})),128)),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("button",{class:"btn btn-info me-3 mb-3",type:"button",onClick:t[10]||(t[10]=function(){return n.addSpecType&&n.addSpecType.apply(n,arguments)})}," 新增規格種類 ")])],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[X,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.productSpecs,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e,class:"mt-0"},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control text-primary fw-bold mb-3","onUpdate:modelValue":function(t){return e.type=t},placeholder:"輸入規格種類: ex: 顏色"},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.type,void 0,{trim:!0}]]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.children,(function(t,c){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":function(t){return e.children[c]=t},key:c,placeholder:"輸入規格 ex: 藍色、紅色、綠色"},null,8,["onUpdate:modelValue"])),[[o["vModelText"],e.children[c],void 0,{trim:!0}]])})),128))])})),128)),Object(o["createVNode"])("div",null,[Object(o["createVNode"])("button",{class:"btn btn-info me-3 mb-3",type:"button",onClick:t[11]||(t[11]=function(){return n.addSpecType&&n.addSpecType.apply(n,arguments)})}," 新增規格種類 "),Object(o["createVNode"])("button",{class:"btn btn-primary mb-3",type:"button",onClick:t[12]||(t[12]=function(){return n.deleteSpecType&&n.deleteSpecType.apply(n,arguments)})}," 刪除規格種類 ")])],64))]),Y]),Object(o["createVNode"])("div",Z,[ee,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[13]||(t[13]=function(e){return a.tempProduct.description=e}),rows:"3",placeholder:"請輸入產品描述"},null,512),[[o["vModelText"],a.tempProduct.description]])]),Object(o["createVNode"])("div",te,[ce,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[14]||(t[14]=function(e){return a.tempProduct.content=e}),rows:"3",placeholder:"請輸入說明內容"},null,512),[[o["vModelText"],a.tempProduct.content]])]),Object(o["createVNode"])("div",oe,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=function(e){return a.tempProduct.is_enabled=e}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[o["vModelCheckbox"],a.tempProduct.is_enabled]]),re])])])])]),Object(o["createVNode"])("div",ae,[ne,Object(o["createVNode"])("button",{type:"button",class:["btn btn-info",{disabled:n.disabled}],onClick:t[16]||(t[16]=function(){return n.sendProduct&&n.sendProduct.apply(n,arguments)})}," 確認 ",2)])])])],512)}c("a434");var ie=c("8a62"),de={props:{temp:{type:Object,required:!0},isNew:{type:Boolean,required:!0}},emits:["send-product"],data:function(){return{tempProduct:{imagesUrl:[""],productSpecs:[]},isLoading:!1}},mixins:[ie["a"]],computed:{modalTitle:function(){return this.isNew?"新增產品":"編輯產品"},disabled:function(){return!(this.tempProduct.title&&this.tempProduct.category&&this.tempProduct.unit&&this.tempProduct.origin_price&&this.tempProduct.price)}},watch:{temp:function(){this.tempProduct=this.temp}},methods:{sendProduct:function(){this.$emit("send-product",this.tempProduct)},addSpecInput:function(e){var t=this.tempProduct.productSpecs[e].children.length-1;this.tempProduct.productSpecs[e].children[t]&&this.tempProduct.productSpecs[e].children.push("")},deleteSpecInput:function(e){var t=this.tempProduct.productSpecs[e].children.length-1;t>=1&&this.tempProduct.productSpecs[e].children.splice(t,1)},addSpecType:function(){this.tempProduct.productSpecs||(this.tempProduct.productSpecs=[]),this.tempProduct.productSpecs.push({type:"",children:[""]})},deleteSpecType:function(e){this.tempProduct.productSpecs.splice(e,1)},upLoadImage:function(e,t){var c=this;this.isLoading=!0;var o=t.target.files[0],r=new FormData;r.append("file-to-upload",o);var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/upload");this.$http.post(a,r).then((function(t){t.data.success?("main-image"===e?c.tempProduct.imageUrl=t.data.imageUrl:c.tempProduct.imagesUrl[e]=t.data.imageUrl,c.swal("成功上傳圖片")):c.swal(t.data.message,"error"),c.isLoading=!1})).catch((function(e){return console.log(e)}))},addImage:function(){this.tempProduct.imagesUrl.push("")},deleteImage:function(){var e=this.tempProduct.imagesUrl.length-1;e>=1?this.tempProduct.imagesUrl.splice(e,1):0===e&&(this.tempProduct.imagesUrl[e]="")}}};de.render=le;var se=de,ue=c("1799"),pe={data:function(){return{products:[],tempProduct:{imagesUrl:[""],productSpecs:[]},pagination:{},isNew:!1,isLoading:!1,productType:""}},components:{ProductModal:se,Pagination:ue["a"]},methods:{openModal:function(e,t){this.tempProduct=e?{imagesUrl:[""],productSpecs:[]}:JSON.parse(JSON.stringify(t)),this.isNew=e,this.$refs.productModal.openModal()},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/products?page=").concat(t);this.$http.get(c).then((function(t){if(t.data.success){var c=t.data,o=c.products,r=c.pagination;e.products=o,e.pagination=r}else e.swal(t.data.message,"error");e.isLoading=!1})).catch((function(e){return console.log(e)}))},updateProduct:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product/").concat(e.id),o="put"),this.$http[o](c,{data:e}).then((function(e){e.data.success?(t.$refs.productModal.hideModal(),t.getProducts(t.pagination.current_page),t.swal(e.data.message)):t.swal(e.data.message,"error"),t.isLoading=!1})).catch((function(e){return console.log(e)}))},deleteProduct:function(e){var t=this;this.swalComfirm("確認刪除 ".concat(e.title,"?")).then((function(c){if(c.isConfirmed){t.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product/").concat(e.id);t.$http.delete(o).then((function(e){e.data.success?(t.getProducts(t.pagination.current_page),t.swal(e.data.message)):t.swal(e.data.message,"error"),t.isLoading=!1})).catch((function(e){return console.log(e)}))}}))}},mounted:function(){this.getProducts()}};pe.render=j;t["default"]=pe},e01a:function(e,t,c){"use strict";var o=c("23e7"),r=c("83ab"),a=c("da84"),n=c("5135"),l=c("861d"),i=c("9bf2").f,d=c("e893"),s=a.Symbol;if(r&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(u[t]=!0),t};d(p,s);var b=p.prototype=s.prototype;b.constructor=p;var m=b.toString,j="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;i(b,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(n(u,e))return"";var c=j?t.slice(7,-1):t.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-563cb814.30da8868.js.map