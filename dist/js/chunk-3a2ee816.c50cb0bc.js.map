{"version":3,"sources":["webpack:///./src/components/front/MenuCart.vue","webpack:///./src/components/front/MenuCart.vue?69f5","webpack:///./src/views/front/List.vue","webpack:///./src/views/front/List.vue?0bb1"],"names":["class","scope","role","colspan","size","cartList","cart","index","key","id","src","product","imageUrl","title","productSpecs","spec","chosedSpec","href","deleteCartItem","loadingIndex","qty","type","updateCart","$toCurrency","Math","round","final_total","useCoupon","placeholder","couponCode","addCoupon","length","deleteAllCartItems","to","props","String","default","emits","data","finalTotal","methods","getCartList","api","this","$http","get","then","res","success","carts","$emit","sendTotal","swal","message","delete","emitter","emit","swalComfirm","willDelete","isConfirmed","put","product_id","post","code","created","on","render","active","isLoading","cartLength","updateTotal","slides-per-view","space-between","loop","scrollbar","breakpoints","swiperOption","recommendProducts","product-data","addToCart","allProducts","768","slidesPerView","spaceBetween","1025","components","Cart","Card","getAllProducts","products","getRecommends","getRandomInt","max","floor","random","arrSet","Set","i","num","add","forEach","push","total"],"mappings":"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","file":"js/chunk-3a2ee816.c50cb0bc.js","sourcesContent":["<template>\r\n    <div class=\"cart\">\r\n        <div >\r\n           <table class=\"table\"\r\n                :class=\"{ 'border' : size === 'lg' }\">\r\n              <thead class=\"table__head\">\r\n                  <tr :class=\"{ 'fs-5' : size === 'lg' }\">\r\n                      <th scope=\"col\" class=\"column__1\">商品</th>\r\n                      <th scope=\"col\" class=\"column__2\">數量</th>\r\n                      <th scope=\"col\" class=\"column__3\">價格</th>\r\n                      <th scope=\"col\" class=\"column__4\"></th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody>\r\n                  <tr v-for=\"(cart, index) in cartList\" :key=\"cart.id\">\r\n                      <th scope=\"row\"\r\n                          class=\"cart__title\">\r\n                          <img v-if=\"size === 'lg'\"\r\n                              :src=\"cart.product.imageUrl\">\r\n                          <div class=\"text\">\r\n                             {{ cart.product.title }}\r\n                              <span v-for=\"spec in cart.productSpecs\"\r\n                                    :key=\"spec\">\r\n                                  ({{ spec.chosedSpec }})\r\n                              </span>\r\n                          </div>\r\n                          <a href=\"#\"\r\n                            @click.prevent=\"deleteCartItem(cart.id, index)\"\r\n                            class=\"hide-for-pad\">\r\n                            <div class=\"spinner-border text-primary spinner-border-sm\"\r\n                                role=\"status\"\r\n                                v-if=\"loadingIndex === index\">\r\n                              <span class=\"visually-hidden delete__icon\">Loading...</span>\r\n                            </div>\r\n                            <span class=\"material-icons delete__icon\" v-else>delete</span>\r\n                          </a>\r\n                      </th>\r\n                      <td class=\"qty__rows\">\r\n                          <div class=\"input-group input-group-sm qty__buttons\">\r\n                              <button class=\"btn btn-primary-light\"\r\n                                      type=\"button\"\r\n                                      id=\"button-addon1\"\r\n                                      :class=\"{ 'disabled': cart.qty === 1 }\"\r\n                                      @click=\"updateCart(cart, cart.qty-1, index )\">\r\n                                  <span class=\"material-icons text-white\">remove</span>\r\n                              </button>\r\n                              <input  type=\"text\"\r\n                                      class=\"form-control cart__num\"\r\n                                      v-model.number=\"cart.qty\"\r\n                                      @change=\"updateCart(cart, cart.qty, index)\">\r\n                              <button class=\"btn btn-primary-light\"\r\n                                      type=\"button\"\r\n                                      id=\"button-addon1\"\r\n                                      @click=\"updateCart(cart, cart.qty+1, index )\">\r\n                                  <span class=\"material-icons text-white\">add</span>\r\n                              </button>\r\n                          </div>\r\n                      </td>\r\n                      <td class=\"price__row\">NT$ {{ $toCurrency(Math.round(cart.final_total)) }}</td>\r\n                      <td class=\"delete-cell\">\r\n                        <a href=\"#\"\r\n                            @click.prevent=\"deleteCartItem(cart.id, index)\">\r\n                            <div class=\"spinner-border text-primary spinner-border-sm\"\r\n                                role=\"status\"\r\n                                v-if=\"loadingIndex === index\">\r\n                              <span class=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <span class=\"material-icons\" v-else>delete</span>\r\n                        </a>\r\n                      </td>\r\n                  </tr>\r\n                   <tr v-if=\"size === 'lg'\">\r\n                    <td colspan=\"4\">\r\n                      <a href=\"#\"\r\n                          v-show=\"!useCoupon\"\r\n                          @click.prevent=\"useCoupon = !useCoupon\">\r\n                          使用優惠代碼\r\n                      </a>\r\n                      <div class=\"input-group mt-2 coupon__inputs\"\r\n                            v-show=\"useCoupon\">\r\n                        <input type=\"text\"\r\n                              class=\"form-control w-25\"\r\n                              placeholder=\"輸入優惠券代碼\"\r\n                              v-model=\"couponCode\">\r\n                        <button class=\"btn btn-outline-primary\"\r\n                                type=\"button\"\r\n                                id=\"button-addon2\"\r\n                                @click=\"addCoupon\">\r\n                                套用\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                  <tr class=\"total__row\">\r\n                    <td colspan=\"4\">\r\n                      <button class=\"btn btn-outline-primary\"\r\n                              :class=\"{ 'disabled' : cartList.length === 0 }\"\r\n                              @click=\"deleteAllCartItems\">\r\n                        清空購物車\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n              </tbody>\r\n          </table>\r\n        </div>\r\n        <div class=\"buttons \">\r\n            <router-link  class=\"btn btn-primary w-100 fw-bolder\"\r\n                          v-if=\"cartList.length !== 0 && size !== 'lg'\"\r\n                          to=\"/dino-park/cart/list\">\r\n              結帳去\r\n            </router-link>\r\n            <router-link class=\"btn btn-primary w-100 fw-bolder\"\r\n                         v-else-if=\"cartList.length === 0 && size === 'sm'\"\r\n                         to=\"/dino-park/store\">來去逛逛吧\r\n            </router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    size: {\r\n      type: String,\r\n      default: 'sm'\r\n    }\r\n  },\r\n  emits: ['update-num', 'send-total'],\r\n  data () {\r\n    return {\r\n      cartList: [],\r\n      finalTotal: 0,\r\n      loadingIndex: null,\r\n      couponCode: '',\r\n      useCoupon: false\r\n    }\r\n  },\r\n  methods: {\r\n    getCartList () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(api)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.cartList = res.data.data.carts\r\n            this.finalTotal = res.data.data.final_total\r\n            this.$emit('update-num', this.cartList.length)\r\n            this.sendTotal()\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n        })\r\n    },\r\n    deleteCartItem (id, index) {\r\n      this.loadingIndex = index\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.$http.delete(api)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.swal(res.data.message)\r\n            this.emitter.emit('add-cart')\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n          this.loadingIndex = null\r\n        })\r\n    },\r\n    deleteAllCartItems () {\r\n      this.swalComfirm('確定清空購物車?')\r\n        .then(willDelete => {\r\n          if (willDelete.isConfirmed) {\r\n            const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\r\n            this.$http.delete(api)\r\n              .then(res => {\r\n                if (res.data.success) {\r\n                  this.swal(res.data.message)\r\n                  this.emitter.emit('add-cart')\r\n                } else {\r\n                  this.swal(res.data.message, 'error')\r\n                }\r\n              })\r\n          }\r\n        })\r\n    },\r\n    updateCart (cart, qty, index) {\r\n      if (qty < 1) {\r\n        this.swal('商品數量小於1', 'error')\r\n        qty = 1\r\n      }\r\n      this.loadingIndex = index\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${cart.id}`\r\n      this.$http.put(api, {\r\n        data: { product_id: cart.product.id, qty: qty }\r\n      })\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.swal(res.data.message)\r\n            this.emitter.emit('add-cart')\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n          this.loadingIndex = null\r\n        })\r\n    },\r\n    addCoupon () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`\r\n      this.$http.post(api, {\r\n        data: {\r\n          code: this.couponCode\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.getCartList()\r\n            this.swal(res.data.message)\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n        })\r\n    },\r\n    sendTotal () {\r\n      this.$emit('send-total', this.finalTotal, this.cartList.length)\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartList()\r\n    this.emitter.on('add-cart', () => {\r\n      this.getCartList()\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./MenuCart.vue?vue&type=template&id=75a9b1c8\"\nimport script from \"./MenuCart.vue?vue&type=script&lang=js\"\nexport * from \"./MenuCart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n   <div class=\"cart_list py-6\">\r\n       <Loading v-model:active=\"isLoading\">\r\n                 <div class=\"loadingio-spinner-rolling-feeb69z48bi\">\r\n                  <div class=\"ldio-947txsafiul\">\r\n                    <div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n        </Loading>\r\n       <div class=\"container\">\r\n          <div class=\"progress__area mb-6 py-6\">\r\n             <div class=\"progress__bar\">\r\n                <div class=\"dotbox active\">\r\n                   <div class=\"dot\">1</div>\r\n                   <span>購物車</span>\r\n                </div>\r\n                <div class=\"dotbox\">\r\n                   <div class=\"dot\">2</div>\r\n                   <span>填寫資料</span>\r\n                </div>\r\n                <div class=\"dotbox\">\r\n                   <div class=\"dot\">3</div>\r\n                   <span>訂單確認</span>\r\n                </div>\r\n             </div>\r\n          </div>\r\n          <div class=\"subtotal__area\"\r\n               v-if=\"cartLength\">\r\n            <Cart :size=\"'lg'\"\r\n              class=\"mb-6\"\r\n              @send-total=\"updateTotal\">\r\n            </Cart>\r\n            <div class=\"row\">\r\n              <div class=\"col-md-7\">\r\n                <div class=\"coupon\">\r\n                    <h4 class=\"cart-title\">可使用優惠券</h4>\r\n                    <div class=\"coupon__list py-1 px-3 border \">\r\n                      <table class=\"table\">\r\n                        <thead class=\"coupon__head\">\r\n                            <tr>\r\n                                <th scope=\"col\" class=\"p-1\">名稱</th>\r\n                                <th scope=\"col\" class=\"p-1\">代碼</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>盛大開幕好禮大放送</td>\r\n                                <td>opening</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>全站88折</td>\r\n                                <td>888</td>\r\n                            </tr>\r\n                        </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-5\">\r\n                <div class=\"subtotal\">\r\n                    <h4 class=\"cart-title\">訂單小計</h4>\r\n                    <div class=\"subtotal__list py-1 px-3 border\">\r\n                      <table class=\"table\">\r\n                        <tbody>\r\n                            <tr>\r\n                              <td>小計</td>\r\n                              <td class=\"text-end\">\r\n                                NT$ {{ $toCurrency(Math.round(this.finalTotal)) }}元\r\n                              </td>\r\n                            </tr>\r\n                          </tbody>\r\n                        </table>\r\n                        <router-link to=\"/dino-park/cart/order\"\r\n                                    class=\"btn btn-lg btn-primary d-block w-75 mx-auto text-white my-3\">\r\n                                    前往結帳\r\n                        </router-link>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"no__product\" v-else>\r\n             <div class=\"icon text-center\">\r\n               <span class=\"material-icons shop__icon\">shopping_cart</span>\r\n               <p class=\"fw-bold\">您的購物車是空的</p>\r\n               <p>加點商品進來吧</p>\r\n               <router-link to=\"/dino-park/store\"\r\n                            class=\"btn btn-lg btn-primary d-block w-25 mx-auto text-white my-3\">\r\n                            來去逛逛\r\n              </router-link>\r\n             </div>\r\n          </div>\r\n          <div class=\"mb-6\">\r\n            <h4 class=\"border-bottom border-2 pb-2 fw-bold mb-6 text-primary\">推薦商品</h4>\r\n            <swiper :slides-per-view=\"1\"\r\n                        :space-between=\"30\"\r\n                        :loop=\"true\"\r\n                        :scrollbar=\"{ draggable: true }\"\r\n                        :breakpoints=\"swiperOption\"\r\n                        class=\"mb-6\">\r\n                <swiper-slide v-for=\"product in recommendProducts\"\r\n                              :key=\"product.id\">\r\n                      <Card :product-data=\"product\"\r\n                        @add-cart=\"addToCart\">\r\n                      </Card>\r\n                </swiper-slide>\r\n            </swiper>\r\n          </div>\r\n       </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Cart from '../../components/front/MenuCart.vue'\r\nimport Card from '../../components/front/Card.vue'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      allProducts: [],\r\n      recommendProducts: [],\r\n      finalTotal: 0,\r\n      cartLength: 0,\r\n      swiperOption: {\r\n        768: {\r\n          slidesPerView: 2,\r\n          spaceBetween: 30\r\n        },\r\n        1025: {\r\n          slidesPerView: 4,\r\n          spaceBetween: 30\r\n        }\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    Cart,\r\n    Card\r\n  },\r\n  methods: {\r\n    getCartList () {\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(api)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.cartLength = res.data.data.carts.length\r\n            this.finalTotal = res.data.data.final_total\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n        })\r\n    },\r\n    getAllProducts () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.allProducts = res.data.products\r\n            this.getRecommends()\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getRandomInt (max) {\r\n      return Math.floor(Math.random() * max)\r\n    },\r\n    getRecommends () {\r\n      const arrSet = new Set([])\r\n      for (let i = 0; arrSet.size < 4; i++) {\r\n        const num = this.getRandomInt(this.allProducts.length)\r\n        arrSet.add(num)\r\n      }\r\n      arrSet.forEach(index => {\r\n        this.recommendProducts.push(this.allProducts[index])\r\n      })\r\n    },\r\n    addToCart (id) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.post(api, {\r\n        data: {\r\n          product_id: id,\r\n          qty: 1\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.swal(res.data.message)\r\n            this.emitter.emit('add-cart')\r\n          } else {\r\n            this.swal(res.data.message, 'error')\r\n          }\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    updateTotal (total, cartLength) {\r\n      this.finalTotal = total\r\n      this.cartLength = cartLength\r\n    }\r\n  },\r\n  created () {\r\n    this.getAllProducts()\r\n    this.getCartList()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./List.vue?vue&type=template&id=41394944\"\nimport script from \"./List.vue?vue&type=script&lang=js\"\nexport * from \"./List.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}