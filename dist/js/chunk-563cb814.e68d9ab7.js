(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-563cb814"],{a434:function(e,t,c){"use strict";var o=c("23e7"),r=c("23cb"),a=c("a691"),n=c("50c4"),l=c("7b0b"),i=c("65f0"),d=c("8418"),s=c("1dde"),u=s("splice"),p=Math.max,b=Math.min,m=9007199254740991,j="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,o,s,u,h,O,f=l(this),g=n(f.length),v=r(e,g),V=arguments.length;if(0===V?c=o=0:1===V?(c=0,o=g-v):(c=V-2,o=b(p(a(t),0),g-v)),g+c-o>m)throw TypeError(j);for(s=i(f,o),u=0;u<o;u++)h=v+u,h in f&&d(s,u,f[h]);if(s.length=o,c<o){for(u=v;u<g-o;u++)h=u+o,O=u+c,h in f?f[O]=f[h]:delete f[O];for(u=g;u>g-o+c;u--)delete f[u-1]}else if(c>o)for(u=g-o;u>v;u--)h=u+o-1,O=u+c-1,h in f?f[O]=f[h]:delete f[O];for(u=0;u<c;u++)f[u+v]=arguments[u+2];return f.length=g-o+c,s}})},cc2a:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),r={class:"product__list fw-bold mb-6"},a=Object(o["createVNode"])("div",{class:"loadingio-spinner-rolling-feeb69z48bi"},[Object(o["createVNode"])("div",{class:"ldio-947txsafiul"},[Object(o["createVNode"])("div")])],-1),n={class:"container p-5 border border-primary"},l={class:"d-flex justify-content-end align-items-center mb-3"},i={class:"table-responsive"},d={class:"table"},s=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",{class:"table-light"},[Object(o["createVNode"])("th",{scope:"col",width:"100"},"類型"),Object(o["createVNode"])("th",{scope:"col",width:"400"},"產品名稱"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"原價"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"售價"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"狀態"),Object(o["createVNode"])("th",{scope:"col",width:"150"},"編輯")])],-1),u={scope:"row",class:"text-info"},p={key:0},b={key:1,class:"text-primary"},m={class:"btn-group",role:"group","aria-label":"Basic example"};function j(e,t,c,j,h,O){var f=Object(o["resolveComponent"])("Loading"),g=Object(o["resolveComponent"])("ProductModal"),v=Object(o["resolveComponent"])("Alert"),V=Object(o["resolveComponent"])("Pagination");return Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])(f,{active:h.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return h.isLoading=e})},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["active"]),Object(o["createVNode"])(g,{ref:"productModal",temp:h.tempProduct,isNew:h.isNew,onSendProduct:O.updateProduct},null,8,["temp","isNew","onSendProduct"]),Object(o["createVNode"])("div",n,[Object(o["createVNode"])("div",l,[Object(o["createVNode"])("button",{class:"btn btn-info","data-bs-target":"#productModal",type:"button",onClick:t[2]||(t[2]=function(e){return O.openModal(!0)})}," 建立新產品 ")]),Object(o["createVNode"])(v,{text:"產品新增請參考本季商品型錄",color:"success"}),Object(o["createVNode"])("div",i,[Object(o["createVNode"])("table",d,[s,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(h.products,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t.id},[Object(o["createVNode"])("th",u,Object(o["toDisplayString"])(t.category),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.$toCurrency(t.origin_price)),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.$toCurrency(t.price)),1),Object(o["createVNode"])("td",null,[t.is_enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("p",p,"啟用")):(Object(o["openBlock"])(),Object(o["createBlock"])("p",b,"未啟用"))]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-info",onClick:function(e){return O.openModal(!1,t)}}," 編輯 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return O.deleteProduct(t)}}," 刪除 ",8,["onClick"])])])])})),128))])])]),Object(o["createVNode"])(V,{pagination:h.pagination,onChangePage:O.getProducts},null,8,["pagination","onChangePage"])])])}var h=c("5530"),O=(c("99af"),c("a4d3"),c("e01a"),{class:"modal fade",id:"productModal",ref:"modal",tabindex:"-1","aria-labelledby":"productModal","aria-hidden":"true"}),f={class:"modal-dialog modal-xl"},g={class:"modal-content"},v={class:"modal-header bg-secondary"},V={class:"modal-title",id:"exampleModalLabel"},N=Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),y={class:"modal-body"},k={class:"container-fluid"},P={class:"row"},w={class:"col-lg-4"},x={class:"mb-3"},U=Object(o["createVNode"])("label",{for:"imgUrl",class:"form-label"},"圖片網址",-1),S=Object(o["createVNode"])("label",{for:"imgUpload",class:"form-label"},"上傳主要圖片",-1),B={key:1,class:"d-flex\r\n                                    justify-content-center\r\n                                    align-items-center",style:{height:"200px"}},M=Object(o["createVNode"])("div",{class:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),C=Object(o["createVNode"])("label",{for:"imagesUrl",class:"form-label"},"上傳附圖",-1),L={class:"col-lg-8"},T={class:"mb-3"},D=Object(o["createVNode"])("label",{for:"title",class:"form-label"},[Object(o["createTextVNode"])(" 標題 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),I={class:"row mb-2"},_={class:"col-md-6"},$={class:"mb-3"},F=Object(o["createVNode"])("label",{for:"category",class:"form-label"},[Object(o["createTextVNode"])(" 分類 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),q={class:"col-md-6"},A={class:"mb-3"},J=Object(o["createVNode"])("label",{for:"unit",class:"form-label"},[Object(o["createTextVNode"])(" 單位 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),z={class:"col-md-6"},E={class:"mb-6"},G=Object(o["createVNode"])("label",{for:"origin_price",class:"form-label"},[Object(o["createTextVNode"])(" 原價 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),H={class:"col-md-6"},K={class:"mb-6"},Q=Object(o["createVNode"])("label",{for:"price",class:"form-label"},[Object(o["createTextVNode"])(" 售價 "),Object(o["createVNode"])("span",{class:"text-primary"},"*")],-1),R={class:"col-md-6 mb-3"},W=Object(o["createVNode"])("label",{class:"form-label"}," 規格 ",-1),X=Object(o["createVNode"])("label",{class:"form-label"}," 規格 ",-1),Y=Object(o["createVNode"])("hr",null,null,-1),Z={class:"mb-3"},ee=Object(o["createVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),te={class:"mb-3"},ce=Object(o["createVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),oe={class:"form-check mb-3"},re=Object(o["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),ae={class:"modal-footer"},ne=Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function le(e,t,c,r,a,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",O,[Object(o["createVNode"])("div",f,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("div",v,[Object(o["createVNode"])("h5",V,Object(o["toDisplayString"])(n.modalTitle),1),N]),Object(o["createVNode"])("div",y,[Object(o["createVNode"])("div",k,[Object(o["createVNode"])("div",P,[Object(o["createVNode"])("div",w,[Object(o["createVNode"])("div",x,[U,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control mb-3",id:"imgUrl","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempProduct.imageUrl=e}),placeholder:"請輸入圖片網址"},null,512),[[o["vModelText"],a.tempProduct.imageUrl,void 0,{trim:!0}]]),S,Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",id:"imgUpload",onChange:t[2]||(t[2]=function(e){return n.upLoadImage("main-image",e)})},null,32),a.isLoading?(Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[M])):(Object(o["openBlock"])(),Object(o["createBlock"])("img",{key:0,class:"img-fluid mb-3",src:a.tempProduct.imageUrl},null,8,["src"])),C,Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",id:"imagesUrl",onChange:t[3]||(t[3]=function(e){return n.upLoadImage("subImage-1",e)})},null,32),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",onChange:t[4]||(t[4]=function(e){return n.upLoadImage("subImage-2",e)})},null,544),[[o["vShow"],a.tempProduct.imagesUrl[0]]]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",onChange:t[5]||(t[5]=function(e){return n.upLoadImage("subImage-3",e)})},null,544),[[o["vShow"],a.tempProduct.imagesUrl[1]]]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",onChange:t[6]||(t[6]=function(e){return n.upLoadImage("subImage-4",e)})},null,544),[[o["vShow"],a.tempProduct.imagesUrl[2]]]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"file",class:"form-control mb-5",onChange:t[7]||(t[7]=function(e){return n.upLoadImage("subImage-5",e)})},null,544),[[o["vShow"],a.tempProduct.imagesUrl[3]]])])]),Object(o["createVNode"])("div",L,[Object(o["createVNode"])("div",T,[D,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[8]||(t[8]=function(e){return a.tempProduct.title=e}),placeholder:"請輸入商品標題"},null,512),[[o["vModelText"],a.tempProduct.title,void 0,{trim:!0}]])]),Object(o["createVNode"])("div",I,[Object(o["createVNode"])("div",_,[Object(o["createVNode"])("div",$,[F,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[9]||(t[9]=function(e){return a.tempProduct.category=e}),placeholder:"請輸入商品分類"},null,512),[[o["vModelText"],a.tempProduct.category,void 0,{trim:!0}]])])]),Object(o["createVNode"])("div",q,[Object(o["createVNode"])("div",A,[J,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":t[10]||(t[10]=function(e){return a.tempProduct.unit=e}),placeholder:"請輸入商品單位"},null,512),[[o["vModelText"],a.tempProduct.unit,void 0,{trim:!0}]])])]),Object(o["createVNode"])("div",z,[Object(o["createVNode"])("div",E,[G,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",min:"0",id:"origin_price","onUpdate:modelValue":t[11]||(t[11]=function(e){return a.tempProduct.origin_price=e}),placeholder:"請輸入商品原價"},null,512),[[o["vModelText"],a.tempProduct.origin_price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",H,[Object(o["createVNode"])("div",K,[Q,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",min:"0",id:"price","onUpdate:modelValue":t[12]||(t[12]=function(e){return a.tempProduct.price=e}),placeholder:"請輸入商品售價"},null,512),[[o["vModelText"],a.tempProduct.price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",R,[c.isNew?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[W,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.productSpecs,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control mb-3 text-primary fw-bold","onUpdate:modelValue":function(t){return e.type=t},placeholder:"規格種類: ex: 顏色"},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.type]]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.children,(function(t,c){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":function(t){return e.children[c]=t},key:t,placeholder:"規格 ex: 藍色、紅色、綠色"},null,8,["onUpdate:modelValue"])),[[o["vModelText"],e.children[c],void 0,{trim:!0}]])})),128)),a.tempProduct.productSpecs[t].children[a.tempProduct.productSpecs[t].children.length-1]?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"btn btn-outline-info me-3 mb-6 d-inline-block",type:"button",onClick:function(e){return n.addSpecInput(t)}}," 新增欄位 ",8,["onClick"])):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"btn btn-outline-primary mb-6",type:"button",onClick:function(e){return n.deleteSpecInput(t)}}," 刪除欄位 ",8,["onClick"]))])})),128)),Object(o["createVNode"])("button",{class:"btn btn-info me-3 mb-3",onClick:t[13]||(t[13]=function(){return n.addSpecType&&n.addSpecType.apply(n,arguments)})}," 新增規格種類 "),Object(o["createVNode"])("button",{class:"btn btn-primary mb-3",onClick:t[14]||(t[14]=function(){return n.deleteSpecType&&n.deleteSpecType.apply(n,arguments)})}," 刪除規格種類 ")],64)):(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:1},[X,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tempProduct.productSpecs,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e,class:"mt-0"},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control text-primary fw-bold mb-3","onUpdate:modelValue":function(t){return e.type=t},placeholder:"輸入規格種類: ex: 顏色"},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.type]]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.children,(function(t,c){return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":function(t){return e.children[c]=t},key:t,placeholder:"輸入規格 ex: 藍色、紅色、綠色"},null,8,["onUpdate:modelValue"])),[[o["vModelText"],e.children[c]]])})),128))])})),128))],64))]),Y]),Object(o["createVNode"])("div",Z,[ee,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[15]||(t[15]=function(e){return a.tempProduct.description=e}),rows:"3",placeholder:"請輸入產品描述"},null,512),[[o["vModelText"],a.tempProduct.description]])]),Object(o["createVNode"])("div",te,[ce,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[16]||(t[16]=function(e){return a.tempProduct.content=e}),rows:"3",placeholder:"請輸入說明內容"},null,512),[[o["vModelText"],a.tempProduct.content]])]),Object(o["createVNode"])("div",oe,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=function(e){return a.tempProduct.is_enabled=e}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[o["vModelCheckbox"],a.tempProduct.is_enabled]]),re])])])])]),Object(o["createVNode"])("div",ae,[ne,Object(o["createVNode"])("button",{type:"button",class:["btn btn-info",{disabled:n.disabled}],onClick:t[18]||(t[18]=function(){return n.sendProduct&&n.sendProduct.apply(n,arguments)})}," 確認 ",2)])])])],512)}c("a434");var ie=c("7c2b"),de=c.n(ie),se={props:{temp:{type:Object,required:!0},isNew:{type:Boolean,required:!0}},data:function(){return{modal:{},tempProduct:{imagesUrl:[],productSpecs:[{type:"",children:[""]}]},isLoading:!1}},computed:{modalTitle:function(){return this.isNew?"新增產品":"編輯產品"},disabled:function(){return!(this.tempProduct.title&&this.tempProduct.category&&this.tempProduct.unit&&this.tempProduct.origin_price&&this.tempProduct.price)}},watch:{temp:function(){this.tempProduct=this.temp}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},sendProduct:function(){this.$emit("send-product",this.tempProduct)},addSpecInput:function(e){var t=this.tempProduct.productSpecs[e].children.length-1;this.tempProduct.productSpecs[e].children[t]&&this.tempProduct.productSpecs[e].children.push("")},deleteSpecInput:function(e){var t=this.tempProduct.productSpecs[e].children.length-1;t>=1&&this.tempProduct.productSpecs[e].children.splice(t,1)},addSpecType:function(){this.tempProduct.productSpecs.push({type:"",children:[""]})},deleteSpecType:function(){var e=this.tempProduct.productSpecs.length-1;e>=1&&this.tempProduct.productSpecs.splice(e,1)},upLoadImage:function(e,t){var c=this;this.isLoading=!0;var o=t.target.files[0],r=new FormData;r.append("file-to-upload",o);var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/upload");this.$http.post(a,r).then((function(t){if(t.data.success){switch(e){case"main-image":c.tempProduct.imageUrl=t.data.imageUrl;break;case"subImage-1":c.tempProduct.imagesUrl[0]=t.data.imageUrl;break;case"subImage-2":c.tempProduct.imagesUrl[1]=t.data.imageUrl;break;case"subImage-3":c.tempProduct.imagesUrl[2]=t.data.imageUrl;break;case"subImage-4":c.tempProduct.imagesUrl[3]=t.data.imageUrl;break;case"subImage-5":c.tempProduct.imagesUrl[4]=t.data.imageUrl;break}c.swal("成功上傳圖片")}else c.swal(t.data.message,"error");c.isLoading=!1}))}},mounted:function(){this.modal=new de.a(this.$refs.modal)}};se.render=le;var ue=se,pe=c("1799"),be={data:function(){return{products:[],tempProduct:{imagesUrl:[],productSpecs:[{type:"",children:[""]}]},pagination:{},isNew:!1,isLoading:!1,productType:""}},components:{ProductModal:ue,Pagination:pe["a"]},methods:{openModal:function(e,t){this.tempProduct=e?{imagesUrl:[],productSpecs:[{type:"",children:[""]}]}:Object(h["a"])({},t),this.isNew=e,this.$refs.productModal.openModal()},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/products?page=").concat(t);this.$http.get(c).then((function(t){if(t.data.success){var c=t.data,o=c.products,r=c.pagination;e.products=o,e.pagination=r}else e.swal(t.data.message,"error");e.isLoading=!1}))},updateProduct:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product/").concat(e.id),o="put"),this.$http[o](c,{data:e}).then((function(e){e.data.success?(t.$refs.productModal.hideModal(),t.getProducts(t.pagination.current_page),t.swal(e.data.message)):t.swal(e.data.message,"error"),t.isLoading=!1}))},deleteProduct:function(e){var t=this;this.swalComfirm("確認刪除 ".concat(e.title,"?")).then((function(c){if(c.isConfirmed){t.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("jurassic","/admin/product/").concat(e.id);t.$http.delete(o).then((function(e){e.data.success?(t.getProducts(),t.swal(e.data.message)):t.swal(e.data.message,"error"),t.isLoading=!1}))}}))}},mounted:function(){this.getProducts()}};be.render=j;t["default"]=be},e01a:function(e,t,c){"use strict";var o=c("23e7"),r=c("83ab"),a=c("da84"),n=c("5135"),l=c("861d"),i=c("9bf2").f,d=c("e893"),s=a.Symbol;if(r&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(u[t]=!0),t};d(p,s);var b=p.prototype=s.prototype;b.constructor=p;var m=b.toString,j="Symbol(test)"==String(s("test")),h=/^Symbol\((.*)\)[^)]+$/;i(b,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=m.call(e);if(n(u,e))return"";var c=j?t.slice(7,-1):t.replace(h,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-563cb814.e68d9ab7.js.map